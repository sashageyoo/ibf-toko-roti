@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-serif: var(--font-merriweather);
  --font-sans: var(--font-chivo);
  --color-sidebar-ring: var(--sidebar-ring);
  --color-sidebar-border: var(--sidebar-border);
  --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
  --color-sidebar-accent: var(--sidebar-accent);
  --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
  --color-sidebar-primary: var(--sidebar-primary);
  --color-sidebar-foreground: var(--sidebar-foreground);
  --color-sidebar: var(--sidebar);
  --color-chart-5: var(--chart-5);
  --color-chart-4: var(--chart-4);
  --color-chart-3: var(--chart-3);
  --color-chart-2: var(--chart-2);
  --color-chart-1: var(--chart-1);
  --color-ring: var(--ring);
  --color-input: var(--input);
  --color-border: var(--border);
  --color-destructive: var(--destructive);
  --color-accent-foreground: var(--accent-foreground);
  --color-accent: var(--accent);
  --color-muted-foreground: var(--muted-foreground);
  --color-muted: var(--muted);
  --color-secondary-foreground: var(--secondary-foreground);
  --color-secondary: var(--secondary);
  --color-primary-foreground: var(--primary-foreground);
  --color-primary: var(--primary);
  --color-popover-foreground: var(--popover-foreground);
  --color-popover: var(--popover);
  --color-card-foreground: var(--card-foreground);
  --color-card: var(--card);
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);
  --radius-3xl: calc(var(--radius) + 12px);
  --radius-4xl: calc(var(--radius) + 16px);
}

:root {
  /* Core Palette */
  --bg-primary: #2c1212;
  --text-primary: #662f2f;
  --text-secondary: #8a6f6f;
  --surface: #fbfaf8;
  --white: #ffffff;
  --error: #ff2323;
  --error-bg: #fbe9e9;

  --radius: 0.625rem;

  /* Shadcn Mapping - INVERTED: Light background, Dark cards */
  --background: var(--surface);
  /* Main page background: Beige White */
  --foreground: var(--text-primary);
  /* Main text on light bg: Brown */

  --card: var(--bg-primary);
  /* Card bg: Dark Brown */
  --card-foreground: var(--surface);
  /* Body text on dark bg: Beige White */

  --popover: var(--bg-primary);
  --popover-foreground: var(--surface);

  --primary: var(--text-primary);
  /* Use Primary Brown for main actions/headings */
  --primary-foreground: var(--white);

  --secondary: #ebe5e5;
  /* Lightened Ash Brown for secondary bg */
  --secondary-foreground: var(--text-primary);

  --muted: #ebe5e5;
  --muted-foreground: var(--text-secondary);

  --accent: #ebe5e5;
  --accent-foreground: var(--text-primary);

  --destructive: var(--error);
  --destructive-foreground: var(--white);

  --border: #e5e0d8;
  /* Light border for light background */

  --input: #e5e0d8;
  --ring: var(--text-primary);

  --chart-1: #662f2f;
  --chart-2: #8a6f6f;
  --chart-3: #a08585;
  --chart-4: #b69b9b;
  --chart-5: #ccb1b1;

  /* Sidebar - Now Dark Brown to match cards */
  --sidebar: var(--bg-primary);
  --sidebar-foreground: var(--surface);
  --sidebar-primary: var(--surface);
  --sidebar-primary-foreground: var(--bg-primary);
  --sidebar-accent: #4a2828;
  --sidebar-accent-foreground: var(--surface);
  --sidebar-border: #4a2828;
  --sidebar-ring: var(--surface);
}

/* 
   Since the design system specifies a "Dark" main background but "Light" cards,
   the concept of a traditional "Dark Mode" toggle might invert this logic 
   or might not be applicable if we want to enforce this specific identity.
   For now, I'll map .dark to standard dark mode just in case, 
   but the primary identity above is what the user asked for.
   Actually, the user said "Global body background to dark-brown". 
   So strict adherence means :root is the main definition.
   I will leave .dark as it was or adjust it slightly to be neutral, 
   but the prompt implies a specific look regardless of system pref.
*/

.dark {
  /* Keeping existing dark mode values or resetting to same IDentity? 
     User said "Refactor visual identity", implying this IS the look.
     I will comment out the .dark overrides so the Identity is persistent 
     OR map them to be same-ish if the user toggles it.
     Let's leave standard dark mode accessible but the default :root matches the prompt. 
  */
  --background: oklch(0.141 0.005 285.823);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.21 0.006 285.885);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.21 0.006 285.885);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.92 0.004 286.32);
  --primary-foreground: oklch(0.21 0.006 285.885);
  --secondary: oklch(0.274 0.006 286.033);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.274 0.006 286.033);
  --muted-foreground: oklch(0.705 0.015 286.067);
  --accent: oklch(0.274 0.006 286.033);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.552 0.016 285.938);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: hsl(240 5.9% 10%);
  --sidebar-foreground: hsl(240 4.8% 95.9%);
  --sidebar-primary: hsl(224.3 76.3% 48%);
  --sidebar-primary-foreground: hsl(0 0% 100%);
  --sidebar-accent: hsl(240 3.7% 15.9%);
  --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
  --sidebar-border: hsl(240 3.7% 15.9%);
  --sidebar-ring: hsl(217.2 91.2% 59.8%);
}

@layer base {
  * {
    @apply border-border outline-ring/50;
  }

  body {
    @apply bg-background text-foreground;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    @apply font-serif;
  }

  /* Ensure headings on dark background (if any direct children of body) are light? 
     The prompt says: "If the background is dark-brown, the text MUST be beige-white."
     Since body is dark brown, direct text is --foreground (Beige White).
     However, if we use h1 in body, default mapping h1 { color: var(--text-primary) } makes it Brown.
     Brown on Dark Brown is bad.
     We need scoped coloring.
     
     Strategy:
     - Headings in Cards (Surface): Brown
     - Headings in Body (Background): Beige White
     
     Since most content is in Cards in a dashboard, the default h1 -> Brown is correct for Cards.
     For page titles outside cards, we might need a utility class or context.
     The dashboard layout generally puts content in a main area.
     
     Let's refine:
     Dashboard main bg is often light in many apps, but here prompt says "Global body background to dark-brown".
     
     If sidebar is Light, texts are Brown.
     If main content area is Dark, texts are White.
     But usually dashboards have a "canvas" area.
     
     Let's stick to the variables:
     Body -> bg-background (Dark), text-foreground (White/Beige).
     Card -> bg-card (Light), text-card-foreground (Ash Brown).
  */
}